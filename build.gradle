plugins {
    id 'java'
}

// Переменная для версии игры, чтобы легко ее менять
ext {
    mindustryVersion = "v150" // Используйте актуальную версию Mindustry
}

group = 'com.mkso4ka.mindustry.matrixproc'
version = '1.0-SNAPSHOT'
sourceCompatibility = 1.8 // Mindustry использует Java 8

repositories {
    mavenCentral()
    // Репозиторий, где хранятся библиотеки Mindustry
    maven { url "https://raw.githubusercontent.com/Anuken/Mindustry/mvn-repo/repository" }
    // Репозиторий для библиотеки Arc (графический движок Mindustry)
    maven { url "https://jitpack.io" }
}

dependencies {
    // Зависимости для тестов (у вас уже были)
    testImplementation platform('org.junit:junit-bom:5.10.0')
    testImplementation 'org.junit.jupiter:junit-jupiter'

    // !!! КЛЮЧЕВАЯ ЗАВИСИМОСТЬ !!!
    // Мы подключаем ядро Mindustry.
    // 'compileOnly' означает, что эти классы нужны только для компиляции,
    // так как в самой игре они уже будут предоставлены.
    compileOnly "com.github.Anuken.Mindustry:core:${mindustryVersion}"
    compileOnly "com.github.Anuken.Arc:arc-core:${mindustryVersion}"
}

// Конфигурация задачи сборки JAR-файла
jar {
    // Указываем, что нужно включить файл mod.hjson из папки resources
    from('src/main/resources') {
        include 'mod.hjson'
    }
    // Указываем имя итогового файла
    archiveBaseName = 'MatrixProcessor'
}

test {
    useJUnitPlatform()
}